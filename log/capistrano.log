  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 15:35:10 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [9bc43521] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [9bc43521] Command: /usr/bin/env mkdir -p /tmp
  INFO [9bc43521] Finished in 0.435 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [9897add6] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [9897add6] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [9897add6] Finished in 0.059 seconds with exit status 0 (successful).
  INFO [12d73a4e] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [12d73a4e] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [12d73a4e] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
f57cd00bec99108c65b09e7e0630e81b2bc83272	refs/heads/master
  INFO [12d73a4e] Finished in 5.538 seconds with exit status 0 (successful).
  INFO [472775a1] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [472775a1] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [472775a1] Finished in 0.067 seconds with exit status 0 (successful).
 DEBUG [00b89cd6] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [00b89cd6] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [00b89cd6] Finished in 0.057 seconds with exit status 0 (successful).
 DEBUG [1f7c5dbd] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [1f7c5dbd] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [1f7c5dbd] 	f57cd00
 DEBUG [1f7c5dbd] Finished in 0.051 seconds with exit status 0 (successful).
 DEBUG [b84655b9] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [b84655b9] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [b84655b9] Finished in 0.064 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [46882f5e] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [46882f5e] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [46882f5e] Finished in 0.063 seconds with exit status 0 (successful).
  INFO [02be4e44] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [02be4e44] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [02be4e44] 	Fetching origin
  INFO [02be4e44] Finished in 6.068 seconds with exit status 0 (successful).
 DEBUG [3a4a7ff9] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [3a4a7ff9] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [3a4a7ff9] Finished in 0.053 seconds with exit status 0 (successful).
  INFO [b311e979] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918073516 as fudan_coffee@115.28.174.126
 DEBUG [b311e979] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918073516 )
  INFO [b311e979] Finished in 0.092 seconds with exit status 0 (successful).
  INFO [524ae900] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918073516 as fudan_coffee@115.28.174.126
 DEBUG [524ae900] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918073516 )
  INFO [524ae900] Finished in 0.075 seconds with exit status 0 (successful).
 DEBUG [949e2501] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [949e2501] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [949e2501] Finished in 0.062 seconds with exit status 0 (successful).
 DEBUG [95c77c1a] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [95c77c1a] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [95c77c1a] 	f57cd00bec99108c65b09e7e0630e81b2bc83272
 DEBUG [95c77c1a] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [6e2bda2d] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918073516; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918073516'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [6e2bda2d] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918073516; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918073516'" 1>&2; false; fi
 DEBUG [6e2bda2d] Finished in 0.059 seconds with exit status 0 (successful).
  INFO [2566c773] Running /usr/bin/env echo "f57cd00bec99108c65b09e7e0630e81b2bc83272" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [2566c773] Command: cd /home/fudan_coffee/deploy/releases/20160918073516 && /usr/bin/env echo "f57cd00bec99108c65b09e7e0630e81b2bc83272" >> REVISION
  INFO [2566c773] Finished in 0.060 seconds with exit status 0 (successful).
  INFO [71a8afc8] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918073516 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [71a8afc8] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918073516 /home/fudan_coffee/deploy/releases/current
  INFO [71a8afc8] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [78cffa45] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [78cffa45] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [78cffa45] Finished in 0.069 seconds with exit status 0 (successful).
  INFO [05f6db5c] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073516 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [05f6db5c] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073516 && pip install -r doc/requirements.txt
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [05f6db5c] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [05f6db5c] Finished in 0.540 seconds with exit status 0 (successful).
  INFO [3ad3f830] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073516 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [3ad3f830] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073516 && python script/migration.py
  INFO [3ad3f830] Finished in 0.195 seconds with exit status 0 (successful).
  INFO [4944fced] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [4944fced] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [4944fced] 	coffee: stopped
coffee: started
  INFO [4944fced] Finished in 1.674 seconds with exit status 0 (successful).
 DEBUG [14595cf1] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [14595cf1] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [14595cf1] 	20160918065005	20160918065305	20160918070357	20160918072709	20160918072853
20160918073516
 DEBUG [14595cf1] Finished in 0.066 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [8f8af065] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918065005 as fudan_coffee@115.28.174.126
 DEBUG [8f8af065] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918065005
  INFO [8f8af065] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [a1a0e603] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [a1a0e603] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [a1a0e603] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [b44ecc22] Running /usr/bin/env echo "Branch master (at f57cd00bec99108c65b09e7e0630e81b2bc83272) deployed as release 20160918073516 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [b44ecc22] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at f57cd00bec99108c65b09e7e0630e81b2bc83272) deployed as release 20160918073516 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [b44ecc22] Finished in 0.055 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 15:35:55 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [12f4f915] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [12f4f915] Command: /usr/bin/env mkdir -p /tmp
  INFO [12f4f915] Finished in 0.440 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [50772cd4] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [50772cd4] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [50772cd4] Finished in 0.067 seconds with exit status 0 (successful).
  INFO [05189dfe] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [05189dfe] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [05189dfe] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
cdfe356811e8e9c1c72f20559c7e3ee484969dd0	refs/heads/master
  INFO [05189dfe] Finished in 6.471 seconds with exit status 0 (successful).
  INFO [2afb8944] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [2afb8944] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [2afb8944] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [b3139768] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [b3139768] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [b3139768] Finished in 0.099 seconds with exit status 0 (successful).
 DEBUG [847465cc] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [847465cc] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [847465cc] 	f57cd00bec99108c65b09e7e0630e81b2bc83272
 DEBUG [847465cc] Finished in 0.079 seconds with exit status 0 (successful).
 DEBUG [7ee29d44] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [7ee29d44] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [7ee29d44] Finished in 0.059 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [c3023ec6] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [c3023ec6] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [c3023ec6] Finished in 0.060 seconds with exit status 0 (successful).
  INFO [a400a612] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [a400a612] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [a400a612] 	Fetching origin
 DEBUG [a400a612] 	From github.com:SlideMark/fudan_coffee
   f57cd00..cdfe356  master     -> master
  INFO [a400a612] Finished in 6.522 seconds with exit status 0 (successful).
 DEBUG [a8b6ac72] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [a8b6ac72] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [a8b6ac72] Finished in 0.055 seconds with exit status 0 (successful).
  INFO [275ff299] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918073603 as fudan_coffee@115.28.174.126
 DEBUG [275ff299] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918073603 )
  INFO [275ff299] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [597a3fc6] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918073603 as fudan_coffee@115.28.174.126
 DEBUG [597a3fc6] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918073603 )
  INFO [597a3fc6] Finished in 0.074 seconds with exit status 0 (successful).
 DEBUG [d005bb8d] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [d005bb8d] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [d005bb8d] Finished in 0.052 seconds with exit status 0 (successful).
 DEBUG [0d005d77] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [0d005d77] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [0d005d77] 	cdfe356811e8e9c1c72f20559c7e3ee484969dd0
 DEBUG [0d005d77] Finished in 0.070 seconds with exit status 0 (successful).
 DEBUG [f7a5f7f8] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918073603; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918073603'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [f7a5f7f8] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918073603; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918073603'" 1>&2; false; fi
 DEBUG [f7a5f7f8] Finished in 0.064 seconds with exit status 0 (successful).
  INFO [d9d45390] Running /usr/bin/env echo "cdfe356811e8e9c1c72f20559c7e3ee484969dd0" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [d9d45390] Command: cd /home/fudan_coffee/deploy/releases/20160918073603 && /usr/bin/env echo "cdfe356811e8e9c1c72f20559c7e3ee484969dd0" >> REVISION
  INFO [d9d45390] Finished in 0.066 seconds with exit status 0 (successful).
  INFO [6143c7e4] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918073603 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [6143c7e4] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918073603 /home/fudan_coffee/deploy/releases/current
  INFO [6143c7e4] Finished in 0.057 seconds with exit status 0 (successful).
  INFO [9ce6fe55] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [9ce6fe55] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [9ce6fe55] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [d470a013] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073603 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [d470a013] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073603 && pip install -r doc/requirements.txt
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [d470a013] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [d470a013] Finished in 0.519 seconds with exit status 0 (successful).
  INFO [04ea0c69] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073603 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [04ea0c69] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073603 && python script/migration.py
  INFO [04ea0c69] Finished in 0.189 seconds with exit status 0 (successful).
  INFO [67fc5538] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [67fc5538] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [67fc5538] 	coffee: stopped
coffee: started
  INFO [67fc5538] Finished in 1.635 seconds with exit status 0 (successful).
 DEBUG [66f4258a] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [66f4258a] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [66f4258a] 	20160918065305	20160918070357	20160918072709	20160918072853	20160918073516
20160918073603
 DEBUG [66f4258a] Finished in 0.052 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [9ebb1592] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918065305 as fudan_coffee@115.28.174.126
 DEBUG [9ebb1592] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918065305
  INFO [9ebb1592] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [ef57bd1a] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [ef57bd1a] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [ef57bd1a] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [f51bc2bd] Running /usr/bin/env echo "Branch master (at cdfe356811e8e9c1c72f20559c7e3ee484969dd0) deployed as release 20160918073603 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [f51bc2bd] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at cdfe356811e8e9c1c72f20559c7e3ee484969dd0) deployed as release 20160918073603 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [f51bc2bd] Finished in 0.061 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 15:37:39 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [9041b9f9] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [9041b9f9] Command: /usr/bin/env mkdir -p /tmp
  INFO [9041b9f9] Finished in 0.397 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [f43469df] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [f43469df] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [f43469df] Finished in 0.071 seconds with exit status 0 (successful).
  INFO [cb20264e] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [cb20264e] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [cb20264e] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
112d1d8fab5d683967dfe24810a9a91c8f351480	refs/heads/master
  INFO [cb20264e] Finished in 7.439 seconds with exit status 0 (successful).
  INFO [61519954] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [61519954] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [61519954] Finished in 0.055 seconds with exit status 0 (successful).
 DEBUG [c68ff95e] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [c68ff95e] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [c68ff95e] Finished in 0.058 seconds with exit status 0 (successful).
 DEBUG [77158dff] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [77158dff] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [77158dff] 	cdfe356811e8e9c1c72f20559c7e3ee484969dd0
 DEBUG [77158dff] Finished in 0.070 seconds with exit status 0 (successful).
 DEBUG [b0dfd67e] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [b0dfd67e] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [b0dfd67e] Finished in 0.057 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [8d3671ad] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [8d3671ad] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [8d3671ad] Finished in 0.059 seconds with exit status 0 (successful).
  INFO [762dfa4f] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [762dfa4f] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [762dfa4f] 	Fetching origin
 DEBUG [762dfa4f] 	From github.com:SlideMark/fudan_coffee
   cdfe356..112d1d8  master     -> master
  INFO [762dfa4f] Finished in 8.892 seconds with exit status 0 (successful).
 DEBUG [e9f28cdb] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [e9f28cdb] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [e9f28cdb] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [78ee4bad] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918073748 as fudan_coffee@115.28.174.126
 DEBUG [78ee4bad] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918073748 )
  INFO [78ee4bad] Finished in 0.073 seconds with exit status 0 (successful).
  INFO [1904219b] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918073748 as fudan_coffee@115.28.174.126
 DEBUG [1904219b] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918073748 )
  INFO [1904219b] Finished in 0.072 seconds with exit status 0 (successful).
 DEBUG [fda065d1] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [fda065d1] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [fda065d1] Finished in 0.067 seconds with exit status 0 (successful).
 DEBUG [af97b300] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [af97b300] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [af97b300] 	112d1d8fab5d683967dfe24810a9a91c8f351480
 DEBUG [af97b300] Finished in 0.065 seconds with exit status 0 (successful).
 DEBUG [5ebf2568] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918073748; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918073748'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [5ebf2568] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918073748; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918073748'" 1>&2; false; fi
 DEBUG [5ebf2568] Finished in 0.061 seconds with exit status 0 (successful).
  INFO [bff35263] Running /usr/bin/env echo "112d1d8fab5d683967dfe24810a9a91c8f351480" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [bff35263] Command: cd /home/fudan_coffee/deploy/releases/20160918073748 && /usr/bin/env echo "112d1d8fab5d683967dfe24810a9a91c8f351480" >> REVISION
  INFO [bff35263] Finished in 0.060 seconds with exit status 0 (successful).
  INFO [5efc5622] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918073748 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [5efc5622] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918073748 /home/fudan_coffee/deploy/releases/current
  INFO [5efc5622] Finished in 0.066 seconds with exit status 0 (successful).
  INFO [6fddf019] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [6fddf019] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [6fddf019] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [aaa18d96] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073748 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [aaa18d96] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073748 && pip install -r doc/requirements.txt
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [aaa18d96] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [aaa18d96] Finished in 0.556 seconds with exit status 0 (successful).
  INFO [18f23eb4] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073748 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [18f23eb4] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918073748 && python script/migration.py
  INFO [18f23eb4] Finished in 0.192 seconds with exit status 0 (successful).
  INFO [ee678dd1] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [ee678dd1] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [ee678dd1] 	coffee: stopped
coffee: started
  INFO [ee678dd1] Finished in 1.778 seconds with exit status 0 (successful).
 DEBUG [cdd3d273] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [cdd3d273] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [cdd3d273] 	20160918070357	20160918072709	20160918072853	20160918073516	20160918073603
20160918073748
 DEBUG [cdd3d273] Finished in 0.070 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [e30070f9] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918070357 as fudan_coffee@115.28.174.126
 DEBUG [e30070f9] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918070357
  INFO [e30070f9] Finished in 0.079 seconds with exit status 0 (successful).
 DEBUG [7d3f293b] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [7d3f293b] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [7d3f293b] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [5f11525b] Running /usr/bin/env echo "Branch master (at 112d1d8fab5d683967dfe24810a9a91c8f351480) deployed as release 20160918073748 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [5f11525b] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at 112d1d8fab5d683967dfe24810a9a91c8f351480) deployed as release 20160918073748 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [5f11525b] Finished in 0.061 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 15:56:58 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [af6a6858] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [af6a6858] Command: /usr/bin/env mkdir -p /tmp
  INFO [af6a6858] Finished in 0.394 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [882faf93] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [882faf93] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [882faf93] Finished in 0.079 seconds with exit status 0 (successful).
  INFO [f74c7033] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [f74c7033] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [f74c7033] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
99e3e068e730579546d209947989c90cc58d2daf	refs/heads/master
  INFO [f74c7033] Finished in 11.942 seconds with exit status 0 (successful).
  INFO [cdbd565f] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [cdbd565f] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [cdbd565f] Finished in 0.071 seconds with exit status 0 (successful).
 DEBUG [f5d03553] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [f5d03553] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [f5d03553] Finished in 0.071 seconds with exit status 0 (successful).
 DEBUG [3fba987a] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [3fba987a] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [3fba987a] 	112d1d8fab5d683967dfe24810a9a91c8f351480
 DEBUG [3fba987a] Finished in 0.068 seconds with exit status 0 (successful).
 DEBUG [0f062f2f] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [0f062f2f] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [0f062f2f] Finished in 0.071 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [9756c63e] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [9756c63e] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [9756c63e] Finished in 0.065 seconds with exit status 0 (successful).
  INFO [f3bbdd93] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [f3bbdd93] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [f3bbdd93] 	Fetching origin
 DEBUG [f3bbdd93] 	From github.com:SlideMark/fudan_coffee
   112d1d8..99e3e06  master     -> master
  INFO [f3bbdd93] Finished in 12.827 seconds with exit status 0 (successful).
 DEBUG [feb42f6a] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [feb42f6a] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [feb42f6a] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [5e6ef54c] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918075711 as fudan_coffee@115.28.174.126
 DEBUG [5e6ef54c] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918075711 )
  INFO [5e6ef54c] Finished in 0.072 seconds with exit status 0 (successful).
  INFO [5babbebb] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918075711 as fudan_coffee@115.28.174.126
 DEBUG [5babbebb] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918075711 )
  INFO [5babbebb] Finished in 0.076 seconds with exit status 0 (successful).
 DEBUG [44e051b0] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [44e051b0] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [44e051b0] Finished in 0.062 seconds with exit status 0 (successful).
 DEBUG [4d1174eb] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [4d1174eb] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [4d1174eb] 	99e3e068e730579546d209947989c90cc58d2daf
 DEBUG [4d1174eb] Finished in 0.075 seconds with exit status 0 (successful).
 DEBUG [d074763a] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918075711; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918075711'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [d074763a] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918075711; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918075711'" 1>&2; false; fi
 DEBUG [d074763a] Finished in 0.061 seconds with exit status 0 (successful).
  INFO [35db59ff] Running /usr/bin/env echo "99e3e068e730579546d209947989c90cc58d2daf" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [35db59ff] Command: cd /home/fudan_coffee/deploy/releases/20160918075711 && /usr/bin/env echo "99e3e068e730579546d209947989c90cc58d2daf" >> REVISION
  INFO [35db59ff] Finished in 0.082 seconds with exit status 0 (successful).
  INFO [658b607b] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918075711 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [658b607b] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918075711 /home/fudan_coffee/deploy/releases/current
  INFO [658b607b] Finished in 0.063 seconds with exit status 0 (successful).
  INFO [9e0f456e] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [9e0f456e] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [9e0f456e] Finished in 0.080 seconds with exit status 0 (successful).
  INFO [84918900] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918075711 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [84918900] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918075711 && pip install -r doc/requirements.txt
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [84918900] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [84918900] Finished in 0.544 seconds with exit status 0 (successful).
  INFO [bc94a3e7] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918075711 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [bc94a3e7] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918075711 && python script/migration.py
  INFO [bc94a3e7] Finished in 0.206 seconds with exit status 0 (successful).
  INFO [0b7dd06e] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [0b7dd06e] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [0b7dd06e] 	coffee: stopped
coffee: started
  INFO [0b7dd06e] Finished in 1.632 seconds with exit status 0 (successful).
 DEBUG [dfd552bf] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [dfd552bf] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [dfd552bf] 	20160918072709	20160918072853	20160918073516	20160918073603	20160918073748
20160918075711
 DEBUG [dfd552bf] Finished in 0.084 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [3d7ab5ab] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918072709 as fudan_coffee@115.28.174.126
 DEBUG [3d7ab5ab] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918072709
  INFO [3d7ab5ab] Finished in 0.078 seconds with exit status 0 (successful).
 DEBUG [9ff42620] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [9ff42620] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [9ff42620] Finished in 0.061 seconds with exit status 0 (successful).
  INFO [e25d7697] Running /usr/bin/env echo "Branch master (at 99e3e068e730579546d209947989c90cc58d2daf) deployed as release 20160918075711 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [e25d7697] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at 99e3e068e730579546d209947989c90cc58d2daf) deployed as release 20160918075711 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [e25d7697] Finished in 0.071 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 16:01:39 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [9db4609a] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [9db4609a] Command: /usr/bin/env mkdir -p /tmp
  INFO [9db4609a] Finished in 0.431 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [632f6346] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [632f6346] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [632f6346] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [4f227fd6] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [4f227fd6] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [4f227fd6] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
2bd97aba01c7f0a2bff073663cf8136811459031	refs/heads/master
  INFO [4f227fd6] Finished in 11.592 seconds with exit status 0 (successful).
  INFO [6e3b75ae] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [6e3b75ae] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [6e3b75ae] Finished in 0.062 seconds with exit status 0 (successful).
 DEBUG [58e4316d] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [58e4316d] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [58e4316d] Finished in 0.060 seconds with exit status 0 (successful).
 DEBUG [99041bcc] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [99041bcc] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [99041bcc] 	99e3e068e730579546d209947989c90cc58d2daf
 DEBUG [99041bcc] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [fb0a097f] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [fb0a097f] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [fb0a097f] Finished in 0.066 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [319b54e5] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [319b54e5] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [319b54e5] Finished in 0.061 seconds with exit status 0 (successful).
  INFO [db18e175] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [db18e175] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [db18e175] 	Fetching origin
 DEBUG [db18e175] 	From github.com:SlideMark/fudan_coffee
   99e3e06..2bd97ab  master     -> master
  INFO [db18e175] Finished in 11.794 seconds with exit status 0 (successful).
 DEBUG [99f37f61] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [99f37f61] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [99f37f61] Finished in 0.068 seconds with exit status 0 (successful).
  INFO [efc00624] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918080152 as fudan_coffee@115.28.174.126
 DEBUG [efc00624] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918080152 )
  INFO [efc00624] Finished in 0.059 seconds with exit status 0 (successful).
  INFO [af68c6ce] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918080152 as fudan_coffee@115.28.174.126
 DEBUG [af68c6ce] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918080152 )
  INFO [af68c6ce] Finished in 0.084 seconds with exit status 0 (successful).
 DEBUG [6b4b6534] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [6b4b6534] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [6b4b6534] Finished in 0.061 seconds with exit status 0 (successful).
 DEBUG [788c446d] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [788c446d] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [788c446d] 	2bd97aba01c7f0a2bff073663cf8136811459031
 DEBUG [788c446d] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [9d178eef] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918080152; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918080152'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [9d178eef] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918080152; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918080152'" 1>&2; false; fi
 DEBUG [9d178eef] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [aa27d7b9] Running /usr/bin/env echo "2bd97aba01c7f0a2bff073663cf8136811459031" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [aa27d7b9] Command: cd /home/fudan_coffee/deploy/releases/20160918080152 && /usr/bin/env echo "2bd97aba01c7f0a2bff073663cf8136811459031" >> REVISION
  INFO [aa27d7b9] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [eb8bf4ba] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918080152 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [eb8bf4ba] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918080152 /home/fudan_coffee/deploy/releases/current
  INFO [eb8bf4ba] Finished in 0.066 seconds with exit status 0 (successful).
  INFO [c287ef12] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [c287ef12] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [c287ef12] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [5f41da99] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918080152 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [5f41da99] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918080152 && pip install -r doc/requirements.txt
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [5f41da99] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [5f41da99] Finished in 0.605 seconds with exit status 0 (successful).
  INFO [68231153] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918080152 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [68231153] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918080152 && python script/migration.py
  INFO [68231153] Finished in 0.197 seconds with exit status 0 (successful).
  INFO [e8056a35] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [e8056a35] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [e8056a35] 	coffee: stopped
coffee: started
  INFO [e8056a35] Finished in 1.711 seconds with exit status 0 (successful).
 DEBUG [07c3cc7c] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [07c3cc7c] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [07c3cc7c] 	20160918072853	20160918073516	20160918073603	20160918073748	20160918075711
20160918080152
 DEBUG [07c3cc7c] Finished in 0.073 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [a4265768] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918072853 as fudan_coffee@115.28.174.126
 DEBUG [a4265768] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918072853
  INFO [a4265768] Finished in 0.068 seconds with exit status 0 (successful).
 DEBUG [3318c112] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [3318c112] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [3318c112] Finished in 0.069 seconds with exit status 0 (successful).
  INFO [230b1c20] Running /usr/bin/env echo "Branch master (at 2bd97aba01c7f0a2bff073663cf8136811459031) deployed as release 20160918080152 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [230b1c20] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at 2bd97aba01c7f0a2bff073663cf8136811459031) deployed as release 20160918080152 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [230b1c20] Finished in 0.112 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 16:17:35 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [060332d8] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [060332d8] Command: /usr/bin/env mkdir -p /tmp
  INFO [060332d8] Finished in 0.415 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [cdb3fb11] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [cdb3fb11] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [cdb3fb11] Finished in 0.069 seconds with exit status 0 (successful).
  INFO [94cada2c] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [94cada2c] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [94cada2c] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
57492ecbb7cefcc765e53c8a0422c1de598d1152	refs/heads/master
  INFO [94cada2c] Finished in 10.606 seconds with exit status 0 (successful).
  INFO [9ead1b2c] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [9ead1b2c] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [9ead1b2c] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [d8a88163] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [d8a88163] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [d8a88163] Finished in 0.060 seconds with exit status 0 (successful).
 DEBUG [de77ea13] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [de77ea13] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [de77ea13] 	2bd97aba01c7f0a2bff073663cf8136811459031
 DEBUG [de77ea13] Finished in 0.058 seconds with exit status 0 (successful).
 DEBUG [27a0e173] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [27a0e173] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [27a0e173] Finished in 0.057 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [5b5b8e15] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [5b5b8e15] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [5b5b8e15] Finished in 0.054 seconds with exit status 0 (successful).
  INFO [a5f509f3] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [a5f509f3] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [a5f509f3] 	Fetching origin
 DEBUG [a5f509f3] 	From github.com:SlideMark/fudan_coffee
   2bd97ab..57492ec  master     -> master
  INFO [a5f509f3] Finished in 10.570 seconds with exit status 0 (successful).
 DEBUG [42f313c1] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [42f313c1] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [42f313c1] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [ece9390e] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918081747 as fudan_coffee@115.28.174.126
 DEBUG [ece9390e] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918081747 )
  INFO [ece9390e] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [824c2342] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918081747 as fudan_coffee@115.28.174.126
 DEBUG [824c2342] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918081747 )
  INFO [824c2342] Finished in 0.076 seconds with exit status 0 (successful).
 DEBUG [e5634934] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [e5634934] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [e5634934] Finished in 0.057 seconds with exit status 0 (successful).
 DEBUG [efa9938c] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [efa9938c] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [efa9938c] 	57492ecbb7cefcc765e53c8a0422c1de598d1152
 DEBUG [efa9938c] Finished in 0.063 seconds with exit status 0 (successful).
 DEBUG [ddfd26d9] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918081747; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918081747'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [ddfd26d9] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918081747; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918081747'" 1>&2; false; fi
 DEBUG [ddfd26d9] Finished in 0.059 seconds with exit status 0 (successful).
  INFO [ee494305] Running /usr/bin/env echo "57492ecbb7cefcc765e53c8a0422c1de598d1152" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [ee494305] Command: cd /home/fudan_coffee/deploy/releases/20160918081747 && /usr/bin/env echo "57492ecbb7cefcc765e53c8a0422c1de598d1152" >> REVISION
  INFO [ee494305] Finished in 0.060 seconds with exit status 0 (successful).
  INFO [8e74fcda] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918081747 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [8e74fcda] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918081747 /home/fudan_coffee/deploy/releases/current
  INFO [8e74fcda] Finished in 0.067 seconds with exit status 0 (successful).
  INFO [9d0cf469] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [9d0cf469] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [9d0cf469] Finished in 0.069 seconds with exit status 0 (successful).
  INFO [21a710cb] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918081747 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [21a710cb] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918081747 && pip install -r doc/requirements.txt
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [21a710cb] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [21a710cb] Finished in 0.522 seconds with exit status 0 (successful).
  INFO [e746d9d2] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918081747 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [e746d9d2] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918081747 && python script/migration.py
  INFO [e746d9d2] Finished in 0.190 seconds with exit status 0 (successful).
  INFO [b091e8e6] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [b091e8e6] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [b091e8e6] 	coffee: stopped
coffee: started
  INFO [b091e8e6] Finished in 1.697 seconds with exit status 0 (successful).
 DEBUG [0b8c40ba] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [0b8c40ba] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [0b8c40ba] 	20160918073516	20160918073603	20160918073748	20160918075711	20160918080152
20160918081747
 DEBUG [0b8c40ba] Finished in 0.062 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [2c5c88d2] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918073516 as fudan_coffee@115.28.174.126
 DEBUG [2c5c88d2] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918073516
  INFO [2c5c88d2] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [2cf73333] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [2cf73333] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [2cf73333] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [80a13d46] Running /usr/bin/env echo "Branch master (at 57492ecbb7cefcc765e53c8a0422c1de598d1152) deployed as release 20160918081747 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [80a13d46] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at 57492ecbb7cefcc765e53c8a0422c1de598d1152) deployed as release 20160918081747 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [80a13d46] Finished in 0.062 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 16:35:50 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [01146835] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [01146835] Command: /usr/bin/env mkdir -p /tmp
  INFO [01146835] Finished in 0.446 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [ea87e3f1] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [ea87e3f1] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [ea87e3f1] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [77754967] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [77754967] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [77754967] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
fdc93d722529966a8544f6564fae9c4b5dbb5ecc	refs/heads/master
  INFO [77754967] Finished in 5.874 seconds with exit status 0 (successful).
  INFO [502a4d2f] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [502a4d2f] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [502a4d2f] Finished in 0.070 seconds with exit status 0 (successful).
 DEBUG [4474f8bf] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [4474f8bf] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [4474f8bf] Finished in 0.058 seconds with exit status 0 (successful).
 DEBUG [60f7de41] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [60f7de41] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [60f7de41] 	57492ecbb7cefcc765e53c8a0422c1de598d1152
 DEBUG [60f7de41] Finished in 0.070 seconds with exit status 0 (successful).
 DEBUG [22a73191] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [22a73191] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [22a73191] Finished in 0.057 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [44dfa02a] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [44dfa02a] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [44dfa02a] Finished in 0.052 seconds with exit status 0 (successful).
  INFO [30f65caa] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [30f65caa] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [30f65caa] 	Fetching origin
 DEBUG [30f65caa] 	From github.com:SlideMark/fudan_coffee
   57492ec..fdc93d7  master     -> master
  INFO [30f65caa] Finished in 10.960 seconds with exit status 0 (successful).
 DEBUG [5a0421b4] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [5a0421b4] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [5a0421b4] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [f6756c1d] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918083557 as fudan_coffee@115.28.174.126
 DEBUG [f6756c1d] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918083557 )
  INFO [f6756c1d] Finished in 0.066 seconds with exit status 0 (successful).
  INFO [16de9a3f] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918083557 as fudan_coffee@115.28.174.126
 DEBUG [16de9a3f] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918083557 )
  INFO [16de9a3f] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [4880614b] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [4880614b] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [4880614b] Finished in 0.051 seconds with exit status 0 (successful).
 DEBUG [e270fd60] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [e270fd60] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [e270fd60] 	fdc93d722529966a8544f6564fae9c4b5dbb5ecc
 DEBUG [e270fd60] Finished in 0.070 seconds with exit status 0 (successful).
 DEBUG [4c6578e6] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918083557; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918083557'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [4c6578e6] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918083557; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918083557'" 1>&2; false; fi
 DEBUG [4c6578e6] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [d6de982f] Running /usr/bin/env echo "fdc93d722529966a8544f6564fae9c4b5dbb5ecc" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [d6de982f] Command: cd /home/fudan_coffee/deploy/releases/20160918083557 && /usr/bin/env echo "fdc93d722529966a8544f6564fae9c4b5dbb5ecc" >> REVISION
  INFO [d6de982f] Finished in 0.059 seconds with exit status 0 (successful).
  INFO [f3f07c84] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918083557 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [f3f07c84] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918083557 /home/fudan_coffee/deploy/releases/current
  INFO [f3f07c84] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [c485e523] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [c485e523] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [c485e523] Finished in 0.069 seconds with exit status 0 (successful).
  INFO [6d1d23a8] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918083557 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [6d1d23a8] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918083557 && pip install -r doc/requirements.txt
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [6d1d23a8] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [6d1d23a8] Finished in 0.540 seconds with exit status 0 (successful).
  INFO [520743b3] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918083557 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [520743b3] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918083557 && python script/migration.py
  INFO [520743b3] Finished in 0.191 seconds with exit status 0 (successful).
  INFO [3357281b] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [3357281b] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [3357281b] 	coffee: stopped
coffee: started
  INFO [3357281b] Finished in 1.621 seconds with exit status 0 (successful).
 DEBUG [e0c2570a] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [e0c2570a] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [e0c2570a] 	20160918073603	20160918073748	20160918075711	20160918080152	20160918081747
20160918083557
 DEBUG [e0c2570a] Finished in 0.074 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [47499a6f] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918073603 as fudan_coffee@115.28.174.126
 DEBUG [47499a6f] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918073603
  INFO [47499a6f] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [917f0e57] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [917f0e57] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [917f0e57] Finished in 0.058 seconds with exit status 0 (successful).
  INFO [89b50f80] Running /usr/bin/env echo "Branch master (at fdc93d722529966a8544f6564fae9c4b5dbb5ecc) deployed as release 20160918083557 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [89b50f80] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at fdc93d722529966a8544f6564fae9c4b5dbb5ecc) deployed as release 20160918083557 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [89b50f80] Finished in 0.059 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 16:46:32 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [ee30eb04] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [ee30eb04] Command: /usr/bin/env mkdir -p /tmp
  INFO [ee30eb04] Finished in 0.396 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [52da7b06] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [52da7b06] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [52da7b06] Finished in 0.079 seconds with exit status 0 (successful).
  INFO [e97b8cac] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [e97b8cac] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [e97b8cac] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
f5c4a8e956717795ade0caa41f2487dcb42cd1c1	refs/heads/master
  INFO [e97b8cac] Finished in 10.439 seconds with exit status 0 (successful).
  INFO [6c118cfb] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [6c118cfb] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [6c118cfb] Finished in 0.075 seconds with exit status 0 (successful).
 DEBUG [c506560e] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [c506560e] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [c506560e] Finished in 0.075 seconds with exit status 0 (successful).
 DEBUG [5b7e5645] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [5b7e5645] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [5b7e5645] 	f5c4a8e
 DEBUG [5b7e5645] Finished in 0.073 seconds with exit status 0 (successful).
 DEBUG [ab395ba1] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [ab395ba1] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [ab395ba1] Finished in 0.071 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [dcb95670] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [dcb95670] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [dcb95670] Finished in 0.073 seconds with exit status 0 (successful).
  INFO [698be54e] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [698be54e] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [698be54e] 	Fetching origin
  INFO [698be54e] Finished in 26.568 seconds with exit status 0 (successful).
 DEBUG [b42867e0] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [b42867e0] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [b42867e0] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [31b6203f] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918084644 as fudan_coffee@115.28.174.126
 DEBUG [31b6203f] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918084644 )
  INFO [31b6203f] Finished in 0.073 seconds with exit status 0 (successful).
  INFO [1bbbd33c] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918084644 as fudan_coffee@115.28.174.126
 DEBUG [1bbbd33c] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918084644 )
  INFO [1bbbd33c] Finished in 0.086 seconds with exit status 0 (successful).
 DEBUG [8d514c77] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [8d514c77] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [8d514c77] Finished in 0.068 seconds with exit status 0 (successful).
 DEBUG [45e17857] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [45e17857] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [45e17857] 	f5c4a8e956717795ade0caa41f2487dcb42cd1c1
 DEBUG [45e17857] Finished in 0.077 seconds with exit status 0 (successful).
 DEBUG [bbe8ea97] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918084644; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918084644'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [bbe8ea97] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918084644; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918084644'" 1>&2; false; fi
 DEBUG [bbe8ea97] Finished in 0.072 seconds with exit status 0 (successful).
  INFO [7e87c94c] Running /usr/bin/env echo "f5c4a8e956717795ade0caa41f2487dcb42cd1c1" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [7e87c94c] Command: cd /home/fudan_coffee/deploy/releases/20160918084644 && /usr/bin/env echo "f5c4a8e956717795ade0caa41f2487dcb42cd1c1" >> REVISION
  INFO [7e87c94c] Finished in 0.072 seconds with exit status 0 (successful).
  INFO [c9411773] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918084644 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [c9411773] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918084644 /home/fudan_coffee/deploy/releases/current
  INFO [c9411773] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [b016eb1d] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [b016eb1d] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [b016eb1d] Finished in 0.089 seconds with exit status 0 (successful).
  INFO [3947c7fb] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918084644 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [3947c7fb] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918084644 && pip install -r doc/requirements.txt
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [3947c7fb] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [3947c7fb] Finished in 0.604 seconds with exit status 0 (successful).
  INFO [ba9d2105] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918084644 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [ba9d2105] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918084644 && python script/migration.py
  INFO [ba9d2105] Finished in 0.200 seconds with exit status 0 (successful).
  INFO [70f4a339] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [70f4a339] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [70f4a339] 	coffee: stopped
coffee: started
  INFO [70f4a339] Finished in 1.635 seconds with exit status 0 (successful).
 DEBUG [c13b3ef7] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [c13b3ef7] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [c13b3ef7] 	20160918075711	20160918080152	20160918081747	20160918083557	20160918084154
20160918084644
 DEBUG [c13b3ef7] Finished in 0.077 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [fa28603e] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918075711 as fudan_coffee@115.28.174.126
 DEBUG [fa28603e] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918075711
  INFO [fa28603e] Finished in 0.078 seconds with exit status 0 (successful).
 DEBUG [ca300116] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [ca300116] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [ca300116] Finished in 0.071 seconds with exit status 0 (successful).
  INFO [5a76d129] Running /usr/bin/env echo "Branch master (at f5c4a8e956717795ade0caa41f2487dcb42cd1c1) deployed as release 20160918084644 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [5a76d129] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at f5c4a8e956717795ade0caa41f2487dcb42cd1c1) deployed as release 20160918084644 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [5a76d129] Finished in 0.071 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 16:57:00 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [6cb5225e] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [6cb5225e] Command: /usr/bin/env mkdir -p /tmp
  INFO [6cb5225e] Finished in 0.519 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [535425bd] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [535425bd] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [535425bd] Finished in 0.079 seconds with exit status 0 (successful).
  INFO [a8567e85] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [a8567e85] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [a8567e85] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
f5c4a8e956717795ade0caa41f2487dcb42cd1c1	refs/heads/master
  INFO [a8567e85] Finished in 6.760 seconds with exit status 0 (successful).
  INFO [0059199b] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [0059199b] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [0059199b] Finished in 0.094 seconds with exit status 0 (successful).
 DEBUG [ff65b0a7] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [ff65b0a7] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [ff65b0a7] Finished in 0.056 seconds with exit status 0 (successful).
 DEBUG [82b12a01] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [82b12a01] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [82b12a01] 	f5c4a8e956717795ade0caa41f2487dcb42cd1c1
 DEBUG [82b12a01] Finished in 0.088 seconds with exit status 0 (successful).
 DEBUG [1980c6b8] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [1980c6b8] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [1980c6b8] Finished in 0.080 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [26fbf319] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [26fbf319] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [26fbf319] Finished in 0.073 seconds with exit status 0 (successful).
  INFO [0a8b90de] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [0a8b90de] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [0a8b90de] 	Fetching origin
  INFO [0a8b90de] Finished in 10.027 seconds with exit status 0 (successful).
 DEBUG [a567a44b] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [a567a44b] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [a567a44b] Finished in 0.067 seconds with exit status 0 (successful).
  INFO [4a37931a] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918085708 as fudan_coffee@115.28.174.126
 DEBUG [4a37931a] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918085708 )
  INFO [4a37931a] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [72688f9f] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918085708 as fudan_coffee@115.28.174.126
 DEBUG [72688f9f] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918085708 )
  INFO [72688f9f] Finished in 0.095 seconds with exit status 0 (successful).
 DEBUG [efde5bcb] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [efde5bcb] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [efde5bcb] Finished in 0.080 seconds with exit status 0 (successful).
 DEBUG [1b41db75] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [1b41db75] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [1b41db75] 	f5c4a8e956717795ade0caa41f2487dcb42cd1c1
 DEBUG [1b41db75] Finished in 0.077 seconds with exit status 0 (successful).
 DEBUG [7c4abc40] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918085708; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918085708'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [7c4abc40] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918085708; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918085708'" 1>&2; false; fi
 DEBUG [7c4abc40] Finished in 0.072 seconds with exit status 0 (successful).
  INFO [f2e779c7] Running /usr/bin/env echo "f5c4a8e956717795ade0caa41f2487dcb42cd1c1" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [f2e779c7] Command: cd /home/fudan_coffee/deploy/releases/20160918085708 && /usr/bin/env echo "f5c4a8e956717795ade0caa41f2487dcb42cd1c1" >> REVISION
  INFO [f2e779c7] Finished in 0.068 seconds with exit status 0 (successful).
  INFO [0c276370] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918085708 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [0c276370] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918085708 /home/fudan_coffee/deploy/releases/current
  INFO [0c276370] Finished in 0.093 seconds with exit status 0 (successful).
  INFO [2466b0ac] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [2466b0ac] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [2466b0ac] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [58faedb0] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085708 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [58faedb0] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085708 && pip install -r doc/requirements.txt
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [58faedb0] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [58faedb0] Finished in 0.564 seconds with exit status 0 (successful).
  INFO [b433b974] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085708 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [b433b974] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085708 && python script/migration.py
  INFO [b433b974] Finished in 0.221 seconds with exit status 0 (successful).
  INFO [07ae4896] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [07ae4896] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [07ae4896] 	coffee: stopped
coffee: started
  INFO [07ae4896] Finished in 1.642 seconds with exit status 0 (successful).
 DEBUG [6a3e008c] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [6a3e008c] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [6a3e008c] 	20160918080152	20160918081747	20160918083557	20160918084154	20160918084644
20160918085708
 DEBUG [6a3e008c] Finished in 0.078 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [d7dbc449] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918080152 as fudan_coffee@115.28.174.126
 DEBUG [d7dbc449] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918080152
  INFO [d7dbc449] Finished in 0.079 seconds with exit status 0 (successful).
 DEBUG [a73a1a08] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [a73a1a08] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [a73a1a08] Finished in 0.081 seconds with exit status 0 (successful).
  INFO [00c03a34] Running /usr/bin/env echo "Branch master (at f5c4a8e956717795ade0caa41f2487dcb42cd1c1) deployed as release 20160918085708 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [00c03a34] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at f5c4a8e956717795ade0caa41f2487dcb42cd1c1) deployed as release 20160918085708 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [00c03a34] Finished in 0.071 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 16:57:59 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [066c6ffd] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [066c6ffd] Command: /usr/bin/env mkdir -p /tmp
  INFO [066c6ffd] Finished in 0.391 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [fd3b8c80] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [fd3b8c80] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [fd3b8c80] Finished in 0.079 seconds with exit status 0 (successful).
  INFO [b37c9491] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [b37c9491] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [b37c9491] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
6a55cbaebd51de8cf7d97d4f8446698978a38634	refs/heads/master
  INFO [b37c9491] Finished in 6.700 seconds with exit status 0 (successful).
  INFO [ae735cd3] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [ae735cd3] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [ae735cd3] Finished in 0.079 seconds with exit status 0 (successful).
 DEBUG [692030c8] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [692030c8] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [692030c8] Finished in 0.072 seconds with exit status 0 (successful).
 DEBUG [29cfcbf5] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [29cfcbf5] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [29cfcbf5] 	f5c4a8e956717795ade0caa41f2487dcb42cd1c1
 DEBUG [29cfcbf5] Finished in 0.077 seconds with exit status 0 (successful).
 DEBUG [48cbeeb0] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [48cbeeb0] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [48cbeeb0] Finished in 0.089 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [dae35e69] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [dae35e69] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [dae35e69] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [98c524f9] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [98c524f9] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [98c524f9] 	Fetching origin
 DEBUG [98c524f9] 	From github.com:SlideMark/fudan_coffee
   f5c4a8e..6a55cba  master     -> master
  INFO [98c524f9] Finished in 7.880 seconds with exit status 0 (successful).
 DEBUG [d5fc05f6] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [d5fc05f6] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [d5fc05f6] Finished in 0.071 seconds with exit status 0 (successful).
  INFO [05321149] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918085807 as fudan_coffee@115.28.174.126
 DEBUG [05321149] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918085807 )
  INFO [05321149] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [a50d04fb] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918085807 as fudan_coffee@115.28.174.126
 DEBUG [a50d04fb] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918085807 )
  INFO [a50d04fb] Finished in 0.084 seconds with exit status 0 (successful).
 DEBUG [30112405] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [30112405] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [30112405] Finished in 0.069 seconds with exit status 0 (successful).
 DEBUG [f75227a8] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [f75227a8] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [f75227a8] 	6a55cbaebd51de8cf7d97d4f8446698978a38634
 DEBUG [f75227a8] Finished in 0.077 seconds with exit status 0 (successful).
 DEBUG [dd4e7c72] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918085807; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918085807'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [dd4e7c72] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918085807; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918085807'" 1>&2; false; fi
 DEBUG [dd4e7c72] Finished in 0.073 seconds with exit status 0 (successful).
  INFO [3877d5a8] Running /usr/bin/env echo "6a55cbaebd51de8cf7d97d4f8446698978a38634" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [3877d5a8] Command: cd /home/fudan_coffee/deploy/releases/20160918085807 && /usr/bin/env echo "6a55cbaebd51de8cf7d97d4f8446698978a38634" >> REVISION
  INFO [3877d5a8] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [01c3c98e] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918085807 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [01c3c98e] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918085807 /home/fudan_coffee/deploy/releases/current
  INFO [01c3c98e] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [dc557595] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [dc557595] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [dc557595] Finished in 0.080 seconds with exit status 0 (successful).
  INFO [54d8483c] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085807 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [54d8483c] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085807 && pip install -r doc/requirements.txt
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [54d8483c] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [54d8483c] Finished in 0.538 seconds with exit status 0 (successful).
  INFO [03681272] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085807 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [03681272] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918085807 && python script/migration.py
  INFO [03681272] Finished in 0.213 seconds with exit status 0 (successful).
  INFO [ae68562f] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [ae68562f] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [ae68562f] 	coffee: stopped
coffee: started
  INFO [ae68562f] Finished in 1.635 seconds with exit status 0 (successful).
 DEBUG [64e999df] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [64e999df] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [64e999df] 	20160918081747	20160918083557	20160918084154	20160918084644	20160918085708
20160918085807
 DEBUG [64e999df] Finished in 0.086 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [22ef1447] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918081747 as fudan_coffee@115.28.174.126
 DEBUG [22ef1447] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918081747
  INFO [22ef1447] Finished in 0.083 seconds with exit status 0 (successful).
 DEBUG [2ab0d695] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [2ab0d695] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [2ab0d695] Finished in 0.068 seconds with exit status 0 (successful).
  INFO [8c1bf6a3] Running /usr/bin/env echo "Branch master (at 6a55cbaebd51de8cf7d97d4f8446698978a38634) deployed as release 20160918085807 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [8c1bf6a3] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at 6a55cbaebd51de8cf7d97d4f8446698978a38634) deployed as release 20160918085807 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [8c1bf6a3] Finished in 0.070 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 17:02:55 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [67cdc6ea] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [67cdc6ea] Command: /usr/bin/env mkdir -p /tmp
  INFO [67cdc6ea] Finished in 0.380 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [51b42341] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [51b42341] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [51b42341] Finished in 0.079 seconds with exit status 0 (successful).
  INFO [79ffa35e] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [79ffa35e] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [79ffa35e] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
9e542c95ff0d933ad7d4fdc73bd665d9627bc27a	refs/heads/master
  INFO [79ffa35e] Finished in 5.014 seconds with exit status 0 (successful).
  INFO [7463094b] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [7463094b] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [7463094b] Finished in 0.097 seconds with exit status 0 (successful).
 DEBUG [69f03556] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [69f03556] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [69f03556] Finished in 0.090 seconds with exit status 0 (successful).
 DEBUG [9b83accf] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [9b83accf] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [9b83accf] 	9e542c9
 DEBUG [9b83accf] Finished in 0.079 seconds with exit status 0 (successful).
 DEBUG [003ebeb2] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [003ebeb2] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [003ebeb2] Finished in 0.078 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [a0b6524f] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [a0b6524f] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [a0b6524f] Finished in 0.078 seconds with exit status 0 (successful).
  INFO [21a3df8a] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [21a3df8a] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [21a3df8a] 	Fetching origin
  INFO [21a3df8a] Finished in 7.584 seconds with exit status 0 (successful).
 DEBUG [27298ca5] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [27298ca5] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [27298ca5] Finished in 0.076 seconds with exit status 0 (successful).
  INFO [11e1f1e9] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918090302 as fudan_coffee@115.28.174.126
 DEBUG [11e1f1e9] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918090302 )
  INFO [11e1f1e9] Finished in 0.083 seconds with exit status 0 (successful).
  INFO [9890a42a] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918090302 as fudan_coffee@115.28.174.126
 DEBUG [9890a42a] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918090302 )
  INFO [9890a42a] Finished in 0.105 seconds with exit status 0 (successful).
 DEBUG [1e640f86] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [1e640f86] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [1e640f86] Finished in 0.080 seconds with exit status 0 (successful).
 DEBUG [e01d7950] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [e01d7950] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [e01d7950] 	9e542c95ff0d933ad7d4fdc73bd665d9627bc27a
 DEBUG [e01d7950] Finished in 0.090 seconds with exit status 0 (successful).
 DEBUG [3608319a] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918090302; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918090302'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [3608319a] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918090302; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918090302'" 1>&2; false; fi
 DEBUG [3608319a] Finished in 0.085 seconds with exit status 0 (successful).
  INFO [559235d4] Running /usr/bin/env echo "9e542c95ff0d933ad7d4fdc73bd665d9627bc27a" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [559235d4] Command: cd /home/fudan_coffee/deploy/releases/20160918090302 && /usr/bin/env echo "9e542c95ff0d933ad7d4fdc73bd665d9627bc27a" >> REVISION
  INFO [559235d4] Finished in 0.076 seconds with exit status 0 (successful).
  INFO [c48d4835] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918090302 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [c48d4835] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918090302 /home/fudan_coffee/deploy/releases/current
  INFO [c48d4835] Finished in 0.086 seconds with exit status 0 (successful).
  INFO [4169dd92] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [4169dd92] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [4169dd92] Finished in 0.089 seconds with exit status 0 (successful).
  INFO [4296c164] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918090302 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [4296c164] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918090302 && pip install -r doc/requirements.txt
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [4296c164] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [4296c164] Finished in 0.677 seconds with exit status 0 (successful).
  INFO [eedef945] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918090302 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [eedef945] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918090302 && python script/migration.py
  INFO [eedef945] Finished in 0.209 seconds with exit status 0 (successful).
  INFO [83a8168b] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [83a8168b] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [83a8168b] 	coffee: stopped
coffee: started
  INFO [83a8168b] Finished in 1.645 seconds with exit status 0 (successful).
 DEBUG [50e729c8] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [50e729c8] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [50e729c8] 	20160918084154	20160918084644	20160918085708	20160918085807	20160918090108
20160918090302
 DEBUG [50e729c8] Finished in 0.085 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [2394534c] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918084154 as fudan_coffee@115.28.174.126
 DEBUG [2394534c] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918084154
  INFO [2394534c] Finished in 0.108 seconds with exit status 0 (successful).
 DEBUG [0c88720d] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [0c88720d] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [0c88720d] Finished in 0.082 seconds with exit status 0 (successful).
  INFO [4a7e1187] Running /usr/bin/env echo "Branch master (at 9e542c95ff0d933ad7d4fdc73bd665d9627bc27a) deployed as release 20160918090302 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [4a7e1187] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at 9e542c95ff0d933ad7d4fdc73bd665d9627bc27a) deployed as release 20160918090302 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [4a7e1187] Finished in 0.078 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 17:16:38 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [723df978] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [723df978] Command: /usr/bin/env mkdir -p /tmp
  INFO [723df978] Finished in 0.420 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [89a6cd51] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [89a6cd51] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [89a6cd51] Finished in 0.138 seconds with exit status 0 (successful).
  INFO [df5c20c3] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [df5c20c3] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [df5c20c3] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
c7f300d415c0291fc69104fd8561252466e0e9ee	refs/heads/master
  INFO [df5c20c3] Finished in 4.631 seconds with exit status 0 (successful).
  INFO [70039101] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [70039101] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [70039101] Finished in 0.089 seconds with exit status 0 (successful).
 DEBUG [ed10b354] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [ed10b354] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [ed10b354] Finished in 0.074 seconds with exit status 0 (successful).
 DEBUG [64a988fb] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [64a988fb] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [64a988fb] 	9e542c95ff0d933ad7d4fdc73bd665d9627bc27a
 DEBUG [64a988fb] Finished in 0.075 seconds with exit status 0 (successful).
 DEBUG [82a7df48] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [82a7df48] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [82a7df48] Finished in 0.074 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [14629524] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [14629524] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [14629524] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [ea38c5ef] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [ea38c5ef] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [ea38c5ef] 	Fetching origin
 DEBUG [ea38c5ef] 	From github.com:SlideMark/fudan_coffee
 DEBUG [ea38c5ef] 	   9e542c9..c7f300d  master     -> master
  INFO [ea38c5ef] Finished in 6.165 seconds with exit status 0 (successful).
 DEBUG [0870056a] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [0870056a] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [0870056a] Finished in 0.075 seconds with exit status 0 (successful).
  INFO [2de3d10d] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918091644 as fudan_coffee@115.28.174.126
 DEBUG [2de3d10d] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918091644 )
  INFO [2de3d10d] Finished in 0.070 seconds with exit status 0 (successful).
  INFO [808adc4f] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918091644 as fudan_coffee@115.28.174.126
 DEBUG [808adc4f] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918091644 )
  INFO [808adc4f] Finished in 0.088 seconds with exit status 0 (successful).
 DEBUG [0ed7d065] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [0ed7d065] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [0ed7d065] Finished in 0.067 seconds with exit status 0 (successful).
 DEBUG [77338b3a] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [77338b3a] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [77338b3a] 	c7f300d415c0291fc69104fd8561252466e0e9ee
 DEBUG [77338b3a] Finished in 0.075 seconds with exit status 0 (successful).
 DEBUG [3ed5d1b1] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918091644; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918091644'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [3ed5d1b1] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918091644; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918091644'" 1>&2; false; fi
 DEBUG [3ed5d1b1] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [cdcdcd99] Running /usr/bin/env echo "c7f300d415c0291fc69104fd8561252466e0e9ee" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [cdcdcd99] Command: cd /home/fudan_coffee/deploy/releases/20160918091644 && /usr/bin/env echo "c7f300d415c0291fc69104fd8561252466e0e9ee" >> REVISION
  INFO [cdcdcd99] Finished in 0.073 seconds with exit status 0 (successful).
  INFO [23db7c3a] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918091644 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [23db7c3a] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918091644 /home/fudan_coffee/deploy/releases/current
  INFO [23db7c3a] Finished in 0.106 seconds with exit status 0 (successful).
  INFO [b19ca036] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [b19ca036] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [b19ca036] Finished in 0.094 seconds with exit status 0 (successful).
  INFO [08c58203] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091644 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [08c58203] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091644 && pip install -r doc/requirements.txt
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [08c58203] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [08c58203] Finished in 0.659 seconds with exit status 0 (successful).
  INFO [60b7b5ad] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091644 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [60b7b5ad] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091644 && python script/migration.py
  INFO [60b7b5ad] Finished in 0.209 seconds with exit status 0 (successful).
  INFO [31302877] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [31302877] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [31302877] 	coffee: stopped
coffee: started
  INFO [31302877] Finished in 1.671 seconds with exit status 0 (successful).
 DEBUG [32f1c273] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [32f1c273] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [32f1c273] 	20160918084644	20160918085708	20160918085807	20160918090108	20160918090302
20160918091644
 DEBUG [32f1c273] Finished in 0.066 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [a77e72f6] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918084644 as fudan_coffee@115.28.174.126
 DEBUG [a77e72f6] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918084644
  INFO [a77e72f6] Finished in 0.079 seconds with exit status 0 (successful).
 DEBUG [d551f7d2] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [d551f7d2] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [d551f7d2] Finished in 1.091 seconds with exit status 0 (successful).
  INFO [4054f28a] Running /usr/bin/env echo "Branch master (at c7f300d415c0291fc69104fd8561252466e0e9ee) deployed as release 20160918091644 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [4054f28a] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at c7f300d415c0291fc69104fd8561252466e0e9ee) deployed as release 20160918091644 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [4054f28a] Finished in 0.506 seconds with exit status 0 (successful).
  INFO ---------------------------------------------------------------------------
  INFO START 2016-09-18 17:17:43 +0800 cap production deploy
  INFO ---------------------------------------------------------------------------
  INFO [4ba97505] Running /usr/bin/env mkdir -p /tmp as fudan_coffee@115.28.174.126
 DEBUG [4ba97505] Command: /usr/bin/env mkdir -p /tmp
  INFO [4ba97505] Finished in 0.427 seconds with exit status 0 (successful).
 DEBUG Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 0.0%
  INFO Uploading /tmp/git-ssh-fudan_coffee-production-irish.sh 100.0%
  INFO [234ce0ac] Running /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh as fudan_coffee@115.28.174.126
 DEBUG [234ce0ac] Command: /usr/bin/env chmod 700 /tmp/git-ssh-fudan_coffee-production-irish.sh
  INFO [234ce0ac] Finished in 0.060 seconds with exit status 0 (successful).
  INFO [a8c4240e] Running /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git as fudan_coffee@115.28.174.126
 DEBUG [a8c4240e] Command: ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git ls-remote --heads git@github.com:SlideMark/fudan_coffee.git )
 DEBUG [a8c4240e] 	1f94bddcb870c8d52056c38f1f9de61f746ffe38	refs/heads/feature/old
b2a63db05bfae903545b40702e3356f3984552ae	refs/heads/master
  INFO [a8c4240e] Finished in 9.739 seconds with exit status 0 (successful).
  INFO [2d9e2aec] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [2d9e2aec] Command: /usr/bin/env mkdir -p /home/fudan_coffee/deploy/shared /home/fudan_coffee/deploy/releases
  INFO [2d9e2aec] Finished in 0.061 seconds with exit status 0 (successful).
 DEBUG [3609faff] Running [ -f /home/fudan_coffee/deploy/current/REVISION ] as fudan_coffee@115.28.174.126
 DEBUG [3609faff] Command: [ -f /home/fudan_coffee/deploy/current/REVISION ]
 DEBUG [3609faff] Finished in 0.056 seconds with exit status 0 (successful).
 DEBUG [15bdce0b] Running /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null as fudan_coffee@115.28.174.126
 DEBUG [15bdce0b] Command: /usr/bin/env cat /home/fudan_coffee/deploy/current/REVISION 2>/dev/null
 DEBUG [15bdce0b] 	c7f300d415c0291fc69104fd8561252466e0e9ee
 DEBUG [15bdce0b] Finished in 0.051 seconds with exit status 0 (successful).
 DEBUG [33192d56] Running [ -f /home/fudan_coffee/deploy/repo/HEAD ] as fudan_coffee@115.28.174.126
 DEBUG [33192d56] Command: [ -f /home/fudan_coffee/deploy/repo/HEAD ]
 DEBUG [33192d56] Finished in 0.058 seconds with exit status 0 (successful).
  INFO The repository mirror is at /home/fudan_coffee/deploy/repo
 DEBUG [e3454993] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [e3454993] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [e3454993] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [83858793] Running /usr/bin/env git remote update --prune as fudan_coffee@115.28.174.126
 DEBUG [83858793] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git remote update --prune )
 DEBUG [83858793] 	Fetching origin
 DEBUG [83858793] 	From github.com:SlideMark/fudan_coffee
   c7f300d..b2a63db  master     -> master
  INFO [83858793] Finished in 6.297 seconds with exit status 0 (successful).
 DEBUG [d90e1f8b] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [d90e1f8b] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [d90e1f8b] Finished in 0.057 seconds with exit status 0 (successful).
  INFO [6b88c4b9] Running /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918091754 as fudan_coffee@115.28.174.126
 DEBUG [6b88c4b9] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env mkdir -p /home/fudan_coffee/deploy/releases/20160918091754 )
  INFO [6b88c4b9] Finished in 0.062 seconds with exit status 0 (successful).
  INFO [54354d0d] Running /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918091754 as fudan_coffee@115.28.174.126
 DEBUG [54354d0d] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git archive master | tar -x -f - -C /home/fudan_coffee/deploy/releases/20160918091754 )
  INFO [54354d0d] Finished in 0.096 seconds with exit status 0 (successful).
 DEBUG [27bbadfc] Running if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [27bbadfc] Command: if test ! -d /home/fudan_coffee/deploy/repo; then echo "Directory does not exist '/home/fudan_coffee/deploy/repo'" 1>&2; false; fi
 DEBUG [27bbadfc] Finished in 0.082 seconds with exit status 0 (successful).
 DEBUG [9f53d3ef] Running /usr/bin/env git rev-list --max-count=1 master as fudan_coffee@115.28.174.126
 DEBUG [9f53d3ef] Command: cd /home/fudan_coffee/deploy/repo && ( export GIT_ASKPASS="/bin/echo" GIT_SSH="/tmp/git-ssh-fudan_coffee-production-irish.sh" ; /usr/bin/env git rev-list --max-count=1 master )
 DEBUG [9f53d3ef] 	b2a63db05bfae903545b40702e3356f3984552ae
 DEBUG [9f53d3ef] Finished in 0.090 seconds with exit status 0 (successful).
 DEBUG [68b87327] Running if test ! -d /home/fudan_coffee/deploy/releases/20160918091754; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918091754'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [68b87327] Command: if test ! -d /home/fudan_coffee/deploy/releases/20160918091754; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases/20160918091754'" 1>&2; false; fi
 DEBUG [68b87327] Finished in 0.065 seconds with exit status 0 (successful).
  INFO [79933beb] Running /usr/bin/env echo "b2a63db05bfae903545b40702e3356f3984552ae" >> REVISION as fudan_coffee@115.28.174.126
 DEBUG [79933beb] Command: cd /home/fudan_coffee/deploy/releases/20160918091754 && /usr/bin/env echo "b2a63db05bfae903545b40702e3356f3984552ae" >> REVISION
  INFO [79933beb] Finished in 0.052 seconds with exit status 0 (successful).
  INFO [9930d731] Running /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918091754 /home/fudan_coffee/deploy/releases/current as fudan_coffee@115.28.174.126
 DEBUG [9930d731] Command: /usr/bin/env ln -s /home/fudan_coffee/deploy/releases/20160918091754 /home/fudan_coffee/deploy/releases/current
  INFO [9930d731] Finished in 0.074 seconds with exit status 0 (successful).
  INFO [aa7a8448] Running /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy as fudan_coffee@115.28.174.126
 DEBUG [aa7a8448] Command: /usr/bin/env mv /home/fudan_coffee/deploy/releases/current /home/fudan_coffee/deploy
  INFO [aa7a8448] Finished in 0.324 seconds with exit status 0 (successful).
  INFO [1258e032] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091754 && pip install -r doc/requirements.txt as fudan_coffee@115.28.174.126
 DEBUG [1258e032] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091754 && pip install -r doc/requirements.txt
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): psycopg2==2.6.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 1))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 2))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): flask==0.11.1 in /home/fudan_coffee/env/lib/python2.7/site-packages (from -r doc/requirements.txt (line 3))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): itsdangerous>=0.21 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): click>=2.0 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): Werkzeug>=0.7 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): Jinja2>=2.4 in /home/fudan_coffee/env/lib/python2.7/site-packages (from flask==0.11.1->-r doc/requirements.txt (line 3))
 DEBUG [1258e032] 	Requirement already satisfied (use --upgrade to upgrade): MarkupSafe in /home/fudan_coffee/env/lib/python2.7/site-packages (from Jinja2>=2.4->flask==0.11.1->-r doc/requirements.txt (line 3))
  INFO [1258e032] Finished in 0.627 seconds with exit status 0 (successful).
  INFO [49287987] Running source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091754 && python script/migration.py as fudan_coffee@115.28.174.126
 DEBUG [49287987] Command: source /home/fudan_coffee/env/bin/activate && cd /home/fudan_coffee/deploy/releases/20160918091754 && python script/migration.py
  INFO [49287987] Finished in 0.200 seconds with exit status 0 (successful).
  INFO [31d1bc39] Running source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee as fudan_coffee@115.28.174.126
 DEBUG [31d1bc39] Command: source /home/fudan_coffee/env/bin/activate && supervisorctl restart coffee
 DEBUG [31d1bc39] 	coffee: stopped
coffee: started
  INFO [31d1bc39] Finished in 1.677 seconds with exit status 0 (successful).
 DEBUG [f170befb] Running /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases as fudan_coffee@115.28.174.126
 DEBUG [f170befb] Command: /usr/bin/env ls -xtr /home/fudan_coffee/deploy/releases
 DEBUG [f170befb] 	20160918085708	20160918085807	20160918090108	20160918090302	20160918091644
20160918091754
 DEBUG [f170befb] Finished in 0.073 seconds with exit status 0 (successful).
  INFO Keeping 5 of 6 deployed releases on 115.28.174.126
  INFO [ea67bb5e] Running /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918085708 as fudan_coffee@115.28.174.126
 DEBUG [ea67bb5e] Command: /usr/bin/env rm -rf /home/fudan_coffee/deploy/releases/20160918085708
  INFO [ea67bb5e] Finished in 0.063 seconds with exit status 0 (successful).
 DEBUG [9c0debaa] Running if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi as fudan_coffee@115.28.174.126
 DEBUG [9c0debaa] Command: if test ! -d /home/fudan_coffee/deploy/releases; then echo "Directory does not exist '/home/fudan_coffee/deploy/releases'" 1>&2; false; fi
 DEBUG [9c0debaa] Finished in 0.060 seconds with exit status 0 (successful).
  INFO [faafc02a] Running /usr/bin/env echo "Branch master (at b2a63db05bfae903545b40702e3356f3984552ae) deployed as release 20160918091754 by irish" >> /home/fudan_coffee/deploy/revisions.log as fudan_coffee@115.28.174.126
 DEBUG [faafc02a] Command: cd /home/fudan_coffee/deploy/releases && /usr/bin/env echo "Branch master (at b2a63db05bfae903545b40702e3356f3984552ae) deployed as release 20160918091754 by irish" >> /home/fudan_coffee/deploy/revisions.log
  INFO [faafc02a] Finished in 0.058 seconds with exit status 0 (successful).
